<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DeTrusty as a Library &mdash; DeTrusty 0.22.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=ade8e72c" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=9f9b922e"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="DeTrusty as a Service" href="service.html" />
    <link rel="prev" title="Decomposition Types" href="decomposition.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.22.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Preliminaries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="source_description.html">Source Descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="decomposition.html">Decomposition Types</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DeTrusty</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">DeTrusty as a Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#local-source-code">Local Source Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#github">GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pypi">PyPI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#executing-queries">Executing Queries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#knowledge4covid-19">Knowledge4COVID-19</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#q1-covid-19-drugs-for-patients-with-asthma">Q1. COVID-19 Drugs for Patients with Asthma</a></li>
<li class="toctree-l4"><a class="reference internal" href="#q2-covid-19-drugs-for-patients-with-a-cardiopathy">Q2. COVID-19 Drugs for Patients with a Cardiopathy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#q3-detailed-covid-19-drug-information-for-patients-with-asthma">Q3. Detailed COVID-19 Drug Information for Patients with Asthma</a></li>
<li class="toctree-l4"><a class="reference internal" href="#q4-covid-19-comorbidity-information">Q4. COVID-19 Comorbidity Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="#q5-covid-19-comorbidity-drugs">Q5. COVID-19 Comorbidity Drugs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#coypu">CoyPu</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#q1-life-expectancy-in-2017">Q1. Life Expectancy in 2017</a></li>
<li class="toctree-l4"><a class="reference internal" href="#q2-gdp-and-co2-emission-per-capita-in-germany">Q2. GDP and CO2 Emission per Capita in Germany</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#source-descriptions">Source Descriptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="service.html">DeTrusty as a Service</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DeTrusty</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">DeTrusty as a Library</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><img alt="python" src="https://img.shields.io/pypi/pyversions/DeTrusty" /> <img alt="format" src="https://img.shields.io/pypi/format/DeTrusty" /> <img alt="status" src="https://img.shields.io/pypi/status/DeTrusty" /> <a class="reference external" href="https://pypi.org/project/DeTrusty"><img alt="version" src="https://img.shields.io/pypi/v/DeTrusty" /></a></p>
<section id="detrusty-as-a-library">
<h1>DeTrusty as a Library<a class="headerlink" href="#detrusty-as-a-library" title="Link to this heading"></a></h1>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>If you want to use DeTrusty as a library, you can install it from its source code on GitHub or download the package from PyPI.</p>
<section id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Link to this heading"></a></h3>
<p>DeTrusty is implemented in Python3. The current version of DeTrusty supports <img alt="python" src="https://img.shields.io/pypi/pyversions/DeTrusty" />.
DeTrusty uses the <code class="docutils literal notranslate"><span class="pre">requests</span></code> library for managing the HTTP(S) requests to the SPARQL endpoints.
The SPARQL parser uses <code class="docutils literal notranslate"><span class="pre">ply</span></code>.
The generation of the source descriptions from RML mappings is enabled by <code class="docutils literal notranslate"><span class="pre">rdflib</span></code>.</p>
</section>
<section id="local-source-code">
<h3>Local Source Code<a class="headerlink" href="#local-source-code" title="Link to this heading"></a></h3>
<p>You can install DeTrusty from your local source code by performing the following steps.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>git@github.com:SDM-TIB/DeTrusty.git
<span class="nb">cd</span><span class="w"> </span>DeTrusty
python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.
</pre></div>
</div>
</section>
<section id="github">
<h3>GitHub<a class="headerlink" href="#github" title="Link to this heading"></a></h3>
<p>DeTrusty can also be installed from its source code in GitHub without explicitly cloning the repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;git+https://github.com/SDM-TIB/DeTrusty#egg=DeTrusty&#39;</span>
</pre></div>
</div>
</section>
<section id="pypi">
<h3>PyPI<a class="headerlink" href="#pypi" title="Link to this heading"></a></h3>
<p>The easiest way to install DeTrusty is to download the package from PyPI:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>DeTrusty
</pre></div>
</div>
</section>
</section>
<section id="executing-queries">
<h2>Executing Queries<a class="headerlink" href="#executing-queries" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The goal of this section is to explain how to run SPARQL queries when using DeTrusty as a library.
We refer the reader to the chapter <a class="reference internal" href="source_description.html"><span class="doc">Source Descriptions</span></a> for more information about what source descriptions are and why they are needed.
Additionally, we refer to <a class="reference internal" href="decomposition.html"><span class="doc">Decomposition Types</span></a> for more details about what decomposition is and an overview of different decomposition types.</p>
</div>
<p>DeTrusty offers the function <code class="docutils literal notranslate"><span class="pre">run_query</span></code> for executing SPARQL queries.</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">run_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decomposition_type='STAR'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sparql_one_dot_one=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config=&lt;DeTrusty.Molecule.MTManager.Config</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">join_stars_locally=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_result=True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yasqe=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout=0</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Executes a SPARQL query over a federation of SPARQL endpoints.</p>
<p>The SPARQL query is decomposed based on the specified decomposition type.
DeTrusty identifies the possible sources for each sub-query using the
metadata collected previously. If the query contains the SERVICE clause,
DeTrusty executed the sub-query at the specified endpoint instead.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a>) – The SPARQL query to be executed. Might be a string holding the SPARQL query or path to
a query file. The query file can be local or remote (accessible via GET request).</p></li>
<li><p><strong>decomposition_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a><em>, </em><em>optional</em>) – The decomposition type to be used for decomposing the query. Possible values
are ‘STAR’ for a star-shaped decomposition, ‘EG’ for exclusive groups decomposition,
and ‘TRIPLE’ for a triple-wise decomposition, i.e., each triple pattern of the query
produces a sub-query. Default is ‘STAR’.</p></li>
<li><p><strong>sparql_one_dot_one</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><em>bool</em></a><em>, </em><em>optional</em>) – <div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 0.15.0: </span>No longer needed. DeTrusty is using one parser now.</p>
</div>
</p></li>
<li><p><strong>config</strong> (<em>DeTrusty.Molecule.MTManager.Config</em><em>, </em><em>optional</em>) – The configuration holding the metadata about the federation over which the
SPARQL query should be executed. If no value is specified, DeTrusty will
attempt to load the configuration from <cite>./Config/rdfmts.json</cite>.</p></li>
<li><p><strong>join_stars_locally</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><em>bool</em></a><em>, </em><em>optional</em>) – Indicates whether joins should be performed at the query engine.
‘True’ meaning joins will be performed in DeTrusty, ‘False’ leads to joins
being executed in the sources if possible. Default behavior is join execution
at the query engine level.</p></li>
<li><p><strong>print_result</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><em>bool</em></a><em>, </em><em>optional</em>) – Indicates whether the actual query result should be returned.
‘True’ meaning the result will be included in the answer.
‘False’ only returns the metadata of the query result, like the cardinality.
Default is ‘True’.</p></li>
<li><p><strong>yasqe</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><em>bool</em></a><em>, </em><em>optional</em>) – Indicates whether the SPARQL query was sent from the YASGUI interface of
DeTrusty’s Web interface. This is a workaround for YASQE not being able
to show the query results when the validation data is included.
Set to ‘True’ to omit the validation data. Default is ‘False’.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.14)"><em>float</em></a><em>, </em><em>optional</em>) – <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature is currently considered experimental and will not produce partial results!</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.17.0.</span></p>
</div>
<p>DeTrusty will stop the query execution once the timeout is reached.
The timeout is specified in seconds. The default is 0 and reflects no limit.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A dictionary including the query answer and additional metadata following the SPARQL protocol.
It returns an error message in the ‘error’ field if something went wrong. Other metadata might
be omitted in that case.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)">dict</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>The example calls assume that an object <code class="docutils literal notranslate"><span class="pre">config</span></code> with the source descriptions exists.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_query</span><span class="p">(</span><span class="s1">&#39;SELECT ?s WHERE { ?s a &lt;http://example.com/Person&gt; }&#39;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_query</span><span class="p">(</span><span class="s1">&#39;./query.rq&#39;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_query</span><span class="p">(</span><span class="s1">&#39;http://example.com/queries/query.rq&#39;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">run_query</span><span class="p">(</span><span class="s1">&#39;./query.rq&#39;</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<p>Additionally, DeTrusty offers the function <code class="docutils literal notranslate"><span class="pre">get_config</span></code> to create an object with the internal representation of the source descriptions.</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_input</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Creates an object with the internal representation of the source descriptions.</p>
<p>Based on the type of input, this function will create a <code class="docutils literal notranslate"><span class="pre">Config</span></code> object either
from a local file, remote file, or a list of dictionaries. The source descriptions
are later used by DeTrusty for the source selection and decomposition. The main
usage of this function is to read stored source descriptions from a file (local or remote)
in order to reuse them for query execution over the same federation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config_input</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a><em> | </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.14)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><em>dict</em></a><em>]</em>) – The source description to transform into the internal representation. Might be a string holding the path
to a configuration file. The configuration file can be local or remote (accessible via GET request).
The source description can also be a parsed JSON, i.e., a list of Python dictionaries. Each dictionary
represents a so-called <em>RDF Molecule Template</em>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The object holding the internal representation of the source descriptions. The result might be <code class="docutils literal notranslate"><span class="pre">None</span></code>
if there was an issue while reading the source descriptions that did not lead to an exception.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Config</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>The example calls assume that the files <code class="docutils literal notranslate"><span class="pre">rdftms.json</span></code> and <code class="docutils literal notranslate"><span class="pre">rdfmts.ttl</span></code> are valid source description files created by DeTrusty.
See <a class="reference external" href="https://sdm-tib.github.io/DeTrusty/library.html#creating-source-descriptions">Creating Source Descriptions</a>
for more information. Additionally, it is assumed that the used SPARQL endpoint is serving valid source descriptions.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;./rdfmts.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;./rdfmts.ttl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;http://example.com/rdfmts.json&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;http://example.com/rdfmts.ttl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;http://src_desc.example.com/sparql&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<section id="knowledge4covid-19">
<h3>Knowledge4COVID-19<a class="headerlink" href="#knowledge4covid-19" title="Link to this heading"></a></h3>
<p>In order to gain hands-on experience with DeTrusty, we provide a couple of examples.
This particular example uses the queries related to the Knowledge4COVID-19 KG <span id="id1">[<a class="reference internal" href="reference.html#id3" title="Ahmad Sakor, Samaneh Jozashoori, Emetis Niazmand, Ariam Rivas, Konstantinos Bougiatiotis, Fotis Aisopos, Enrique Iglesias, Philipp D. Rohde, Trupti Padiya, Anastasia Krithara, Georgios Paliouras, and Maria-Esther Vidal. Knowledge4COVID-19: A semantic-based approach for constructing a COVID-19 related knowledge graph from various sources and analyzing treatments’ toxicities. Journal of Web Semantics, 2023. doi:https://doi.org/10.1016/j.websem.2022.100760.">4</a>]</span>.
Before running the examples below, please, make sure that you have DeTrusty installed.</p>
<p>The federation of knowledge graphs for this example contains the following SPARQL endpoints:</p>
<ul class="simple">
<li><p>Knowledge4COVID-19 KG: <a class="reference external" href="https://labs.tib.eu/sdm/covid19kg/sparql">https://labs.tib.eu/sdm/covid19kg/sparql</a></p></li>
<li><p>DBpedia: <a class="reference external" href="https://dbpedia.org/sparql">https://dbpedia.org/sparql</a></p></li>
<li><p>Wikidata: <a class="reference external" href="https://query.wikidata.org/sparql">https://query.wikidata.org/sparql</a></p></li>
</ul>
<section id="q1-covid-19-drugs-for-patients-with-asthma">
<h4>Q1. COVID-19 Drugs for Patients with Asthma<a class="headerlink" href="#q1-covid-19-drugs-for-patients-with-asthma" title="Link to this heading"></a></h4>
<p><em>“Retrieve from DBpedia the excretion rate, metabolism, and routes of administration of the COVID-19 drugs in the treatments to treat COVID-19 in patients with Asthma.”</em></p>
<div class="highlight-sparql notranslate"><div class="highlight"><pre><span></span><span class="k">PREFIX</span> <span class="nn">dbp</span><span class="p">:</span> <span class="nl">&lt;http://dbpedia.org/property/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">owl</span><span class="p">:</span> <span class="nl">&lt;http://www.w3.org/2002/07/owl#&gt;</span>
<span class="k">PREFIX</span> <span class="nn">k4covid</span><span class="p">:</span> <span class="nl">&lt;http://research.tib.eu/covid-19/vocab/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">k4covide</span><span class="p">:</span> <span class="nl">&lt;http://research.tib.eu/covid-19/entity/&gt;</span>

<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="nv">?treatment</span> <span class="nv">?sameAsCovidDrug</span> <span class="nv">?excretation</span> <span class="nv">?metabolism</span> <span class="nv">?routes</span> <span class="k">WHERE</span> <span class="p">{</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCovidDrug</span> <span class="nv">?covidDrug</span><span class="p">.</span>
    <span class="k">FILTER</span><span class="p">(</span> <span class="nv">?comorbidity</span><span class="o">=</span><span class="nn">k4covide</span><span class="p">:</span><span class="nt">Asthma</span> <span class="p">)</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasComorbidity</span> <span class="nv">?comorbidity</span><span class="p">.</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasComorbidityDrug</span> <span class="nv">?comorbidityDrug</span><span class="p">.</span>
    <span class="nv">?comorbidityDrug</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCUIAnnotation</span> <span class="nv">?CUIComorbidityDrug</span><span class="p">.</span>
    <span class="nv">?CUIComorbidityDrug</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">sameAs</span> <span class="nv">?sameAsComorbidityDrug</span> <span class="p">.</span>
    <span class="nv">?covidDrug</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCUIAnnotation</span> <span class="nv">?CUICovidDrug</span><span class="p">.</span>
    <span class="nv">?CUICovidDrug</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">sameAs</span> <span class="nv">?sameAsCovidDrug</span> <span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">excretion</span> <span class="nv">?excretation</span><span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">metabolism</span> <span class="nv">?metabolism</span><span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">routesOfAdministration</span> <span class="nv">?routes</span><span class="p">.</span>
<span class="p">}</span> <span class="k">ORDER BY</span> <span class="nv">?treatment</span>
</pre></div>
</div>
<p>This query collects data from the Knowledge4COVID-19 KG and DBpedia. See below how to execute the query with DeTrusty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">DeTrusty</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config</span><span class="p">,</span> <span class="n">run_query</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/K4COVID/rdfmts.ttl&#39;</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/K4COVID/Q1.rq&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">join_stars_locally</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="q2-covid-19-drugs-for-patients-with-a-cardiopathy">
<h4>Q2. COVID-19 Drugs for Patients with a Cardiopathy<a class="headerlink" href="#q2-covid-19-drugs-for-patients-with-a-cardiopathy" title="Link to this heading"></a></h4>
<p><em>“Retrieve from Wikidata the CheMBL code, metabolism, and routes of administration of the COVID-19 drugs in the treatments to treat COVID-19 in patients with a cardiopathy.”</em></p>
<div class="highlight-sparql notranslate"><div class="highlight"><pre><span></span><span class="k">PREFIX</span> <span class="nn">owl</span><span class="p">:</span> <span class="nl">&lt;http://www.w3.org/2002/07/owl#&gt;</span>
<span class="k">PREFIX</span> <span class="nn">k4covid</span><span class="p">:</span> <span class="nl">&lt;http://research.tib.eu/covid-19/vocab/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">k4covide</span><span class="p">:</span> <span class="nl">&lt;http://research.tib.eu/covid-19/entity/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">wdt</span><span class="p">:</span> <span class="nl">&lt;http://www.wikidata.org/prop/direct/&gt;</span>

<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="nv">?treatment</span> <span class="nv">?sameAsComorbidityDrug</span> <span class="nv">?idDrug</span> <span class="nv">?activeIngredient</span> <span class="nv">?mass</span>
<span class="k">WHERE</span> <span class="p">{</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCovidDrug</span> <span class="nv">?covidDrug</span><span class="p">.</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasComorbidity</span> <span class="nn">k4covide</span><span class="p">:</span><span class="nt">Cardiopathy</span> <span class="p">.</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasComorbidityDrug</span> <span class="nv">?comorbidityDrug</span><span class="p">.</span>
    <span class="nv">?comorbidityDrug</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCUIAnnotation</span> <span class="nv">?CUIComorbidityDrug</span><span class="p">.</span>
    <span class="nv">?CUIComorbidityDrug</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">sameAs</span> <span class="nv">?sameAsComorbidityDrug</span> <span class="p">.</span>
    <span class="nv">?covidDrug</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCUIAnnotation</span> <span class="nv">?CUICovidDrug</span><span class="p">.</span>
    <span class="nv">?CUICovidDrug</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">sameAs</span> <span class="nv">?sameAsCovidDrug</span> <span class="p">.</span>
    <span class="nv">?sameAsComorbidityDrug</span> <span class="nn">wdt</span><span class="p">:</span><span class="nt">P592</span> <span class="nv">?idDrug</span> <span class="p">.</span>
    <span class="nv">?sameAsComorbidityDrug</span> <span class="nn">wdt</span><span class="p">:</span><span class="nt">P3780</span> <span class="nv">?activeIngredient</span> <span class="p">.</span>
    <span class="nv">?sameAsComorbidityDrug</span>  <span class="nn">wdt</span><span class="p">:</span><span class="nt">P2067</span> <span class="nv">?mass</span> <span class="p">.</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This query collects data from the Knowledge4COVID-19 KG and Wikidata. See below how to execute the query with DeTrusty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">DeTrusty</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config</span><span class="p">,</span> <span class="n">run_query</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/K4COVID/rdfmts.ttl&#39;</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/K4COVID/Q2.rq&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">join_stars_locally</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="q3-detailed-covid-19-drug-information-for-patients-with-asthma">
<h4>Q3. Detailed COVID-19 Drug Information for Patients with Asthma<a class="headerlink" href="#q3-detailed-covid-19-drug-information-for-patients-with-asthma" title="Link to this heading"></a></h4>
<p><em>“Retrieve from DBpedia the excretion rate, metabolism, and routes of administration, CheMBL and Kegg codes, smile notation, and trade name of the COVID-19 drugs in the treatments to treat COVID-19 in patients with Asthma.”</em></p>
<div class="highlight-sparql notranslate"><div class="highlight"><pre><span></span><span class="k">PREFIX</span> <span class="nn">owl</span><span class="p">:</span> <span class="nl">&lt;http://www.w3.org/2002/07/owl#&gt;</span>
<span class="k">PREFIX</span> <span class="nn">k4covid</span><span class="p">:</span> <span class="nl">&lt;http://research.tib.eu/covid-19/vocab/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">k4covide</span><span class="p">:</span> <span class="nl">&lt;http://research.tib.eu/covid-19/entity/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">dbo</span><span class="p">:</span> <span class="nl">&lt;http://dbpedia.org/ontology/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">dbp</span><span class="p">:</span> <span class="nl">&lt;http://dbpedia.org/property/&gt;</span>

<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="nv">?treatment</span> <span class="nv">?sameAsCovidDrug</span> <span class="nv">?excretion</span> <span class="nv">?metabolism</span> <span class="nv">?routes</span> <span class="nv">?dbDrugBank</span> <span class="nv">?dbSmiles</span> <span class="nv">?tradeName</span>
<span class="k">WHERE</span> <span class="p">{</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCovidDrug</span> <span class="nv">?covidDrug</span><span class="p">.</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasComorbidity</span> <span class="nn">k4covide</span><span class="p">:</span><span class="nt">Asthma</span><span class="p">.</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasComorbidityDrug</span> <span class="nv">?comorbidityDrug</span><span class="p">.</span>
    <span class="nv">?comorbidityDrug</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCUIAnnotation</span> <span class="nv">?CUIComorbidityDrug</span><span class="p">.</span>
    <span class="nv">?CUIComorbidityDrug</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">sameAs</span> <span class="nv">?sameAsComorbidityDrug</span> <span class="p">.</span>
    <span class="nv">?covidDrug</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCUIAnnotation</span> <span class="nv">?CUICovidDrug</span><span class="p">.</span>
    <span class="nv">?CUICovidDrug</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">sameAs</span> <span class="nv">?sameAsCovidDrug</span> <span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">excretion</span> <span class="nv">?excretion</span><span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">metabolism</span> <span class="nv">?metabolism</span><span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">routesOfAdministration</span> <span class="nv">?routes</span><span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">chembl</span> <span class="nv">?dbCheml</span><span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">kegg</span> <span class="nv">?dbKegg</span><span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbo</span><span class="p">:</span><span class="nt">drugbank</span> <span class="nv">?dbDrugBank</span> <span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">smiles</span> <span class="nv">?dbSmiles</span> <span class="p">.</span>
    <span class="nv">?sameAsCovidDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">tradename</span> <span class="nv">?tradeName</span><span class="p">.</span>
<span class="p">}</span> <span class="k">ORDER BY</span> <span class="nv">?treatment</span>
</pre></div>
</div>
<p>This query collects data from the Knowledge4COVID-19 KG and DBpedia. See below how to execute the query with DeTrusty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">DeTrusty</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config</span><span class="p">,</span> <span class="n">run_query</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/K4COVID/rdfmts.ttl&#39;</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/K4COVID/Q3.rq&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">join_stars_locally</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="q4-covid-19-comorbidity-information">
<h4>Q4. COVID-19 Comorbidity Information<a class="headerlink" href="#q4-covid-19-comorbidity-information" title="Link to this heading"></a></h4>
<p><em>“Retrieve from DBpedia the disease label, ICD-10 and mesh codes, and risks of the comorbidities of the COVID-19 treatments.”</em></p>
<div class="highlight-sparql notranslate"><div class="highlight"><pre><span></span><span class="k">PREFIX</span> <span class="nn">owl</span><span class="p">:</span> <span class="nl">&lt;http://www.w3.org/2002/07/owl#&gt;</span>
<span class="k">PREFIX</span> <span class="nn">k4covid</span><span class="p">:</span> <span class="nl">&lt;http://research.tib.eu/covid-19/vocab/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">k4covide</span><span class="p">:</span> <span class="nl">&lt;http://research.tib.eu/covid-19/entity/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">dbo</span><span class="p">:</span> <span class="nl">&lt;http://dbpedia.org/ontology/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">dbp</span><span class="p">:</span> <span class="nl">&lt;http://dbpedia.org/property/&gt;</span>

<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="nv">?sameAsComorbidity</span> <span class="nv">?icd10</span> <span class="nv">?risk</span> <span class="k">WHERE</span> <span class="p">{</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCovidDrug</span> <span class="nv">?covidDrug</span><span class="p">.</span>
    <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasComorbidity</span> <span class="nv">?comorbidity</span><span class="p">.</span>
    <span class="nv">?comorbidity</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCUIAnnotation</span> <span class="nv">?annotationComorbidity</span> <span class="p">.</span>
    <span class="nv">?annotationComorbidity</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">sameAs</span> <span class="nv">?sameAsComorbidity</span> <span class="p">.</span>
    <span class="nv">?sameAsComorbidity</span> <span class="nn">dbo</span><span class="p">:</span><span class="nt">icd10</span> <span class="nv">?icd10</span><span class="p">.</span>
    <span class="nv">?sameAsComorbidity</span> <span class="nn">dbo</span><span class="p">:</span><span class="nt">meshId</span> <span class="nv">?meshID</span> <span class="p">.</span>
    <span class="nv">?sameAsComorbidity</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">risks</span> <span class="nv">?risk</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This query collects data from the Knowledge4COVID-19 KG and Wikidata. See below how to execute the query with DeTrusty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">DeTrusty</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config</span><span class="p">,</span> <span class="n">run_query</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/K4COVID/rdfmts.ttl&#39;</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/K4COVID/Q4.rq&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">join_stars_locally</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="q5-covid-19-comorbidity-drugs">
<h4>Q5. COVID-19 Comorbidity Drugs<a class="headerlink" href="#q5-covid-19-comorbidity-drugs" title="Link to this heading"></a></h4>
<p><em>“Retrieve the COVID-19 and comorbidity drugs on a treatment and the CheMBL code, mass, and excretion route for the comorbidity drugs.”</em></p>
<div class="highlight-sparql notranslate"><div class="highlight"><pre><span></span><span class="k">PREFIX</span> <span class="nn">dbp</span><span class="p">:</span> <span class="nl">&lt;http://dbpedia.org/property/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">owl</span><span class="p">:</span> <span class="nl">&lt;http://www.w3.org/2002/07/owl#&gt;</span>
<span class="k">PREFIX</span> <span class="nn">k4covid</span><span class="p">:</span> <span class="nl">&lt;http://research.tib.eu/covid-19/vocab/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">k4covide</span><span class="p">:</span> <span class="nl">&lt;http://research.tib.eu/covid-19/entity/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">wdt</span><span class="p">:</span> <span class="nl">&lt;http://www.wikidata.org/prop/direct/&gt;</span>

<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="nv">?treatment</span> <span class="nv">?sameAsComorbidityDrug</span> <span class="nv">?sameAsCovidDrug</span> <span class="nv">?idDrug</span> <span class="nv">?mass</span> <span class="nv">?excretation</span>
<span class="k">WHERE</span> <span class="p">{</span>
  <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCovidDrug</span> <span class="nv">?covidDrug</span><span class="p">.</span>
  <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasComorbidity</span> <span class="nn">k4covide</span><span class="p">:</span><span class="nt">Cardiopathy</span> <span class="p">.</span>
  <span class="nv">?treatment</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasComorbidityDrug</span> <span class="nv">?comorbidityDrug</span><span class="p">.</span>
  <span class="nv">?comorbidityDrug</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCUIAnnotation</span> <span class="nv">?CUIComorbidityDrug</span><span class="p">.</span>
  <span class="nv">?CUIComorbidityDrug</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">sameAs</span> <span class="nv">?sameAsComorbidityDrug</span> <span class="p">.</span>
  <span class="nv">?covidDrug</span> <span class="nn">k4covid</span><span class="p">:</span><span class="nt">hasCUIAnnotation</span> <span class="nv">?CUICovidDrug</span><span class="p">.</span>
  <span class="nv">?CUICovidDrug</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">sameAs</span> <span class="nv">?sameAsCovidDrug</span> <span class="p">.</span>
  <span class="p">{</span>
    <span class="nv">?sameAsComorbidityDrug</span> <span class="nn">wdt</span><span class="p">:</span><span class="nt">P592</span> <span class="nv">?idDrug</span> <span class="p">.</span>
    <span class="nv">?sameAsComorbidityDrug</span> <span class="nn">wdt</span><span class="p">:</span><span class="nt">P2067</span> <span class="nv">?mass</span> <span class="p">.</span>
  <span class="p">}</span>
  <span class="k">UNION</span>
  <span class="p">{</span>
    <span class="nv">?sameAsComorbidityDrug</span> <span class="nn">dbp</span><span class="p">:</span><span class="nt">excretion</span> <span class="nv">?excretation</span> <span class="p">.</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This query collects data from the Knowledge4COVID-19 KG, DBpedia, and Wikidata. See below how to execute the query with DeTrusty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">DeTrusty</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config</span><span class="p">,</span> <span class="n">run_query</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/K4COVID/rdfmts.ttl&#39;</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/K4COVID/Q5.rq&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">join_stars_locally</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="coypu">
<h3>CoyPu<a class="headerlink" href="#coypu" title="Link to this heading"></a></h3>
<p>This particular example uses queries related to the project <a class="reference external" href="https://coypu.org">CoyPu</a>.
Before running the examples below, please, make sure that you have DeTrusty installed.</p>
<p>The federation of knowledge graphs for this example contains the following SPARQL endpoints:</p>
<ul class="simple">
<li><p>World Bank KG: <a class="reference external" href="https://labs.tib.eu/sdm/worldbank_endpoint/sparql">https://labs.tib.eu/sdm/worldbank_endpoint/sparql</a></p></li>
<li><p>Wikidata: <a class="reference external" href="https://query.wikidata.org/sparql">https://query.wikidata.org/sparql</a></p></li>
</ul>
<section id="q1-life-expectancy-in-2017">
<h4>Q1. Life Expectancy in 2017<a class="headerlink" href="#q1-life-expectancy-in-2017" title="Link to this heading"></a></h4>
<p><em>“Retrieve the life expectancy for all countries in 2017 as reported by World Bank and Wikidata”</em></p>
<div class="highlight-sparql notranslate"><div class="highlight"><pre><span></span><span class="k">PREFIX</span> <span class="nn">wb</span><span class="p">:</span> <span class="nl">&lt;http://worldbank.org/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">owl</span><span class="p">:</span> <span class="nl">&lt;http://www.w3.org/2002/07/owl#&gt;</span>
<span class="k">PREFIX</span> <span class="nn">time</span><span class="p">:</span> <span class="nl">&lt;http://www.w3.org/2006/time#&gt;</span>
<span class="k">PREFIX</span> <span class="nn">p</span><span class="p">:</span> <span class="nl">&lt;http://www.wikidata.org/prop/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">ps</span><span class="p">:</span> <span class="nl">&lt;http://www.wikidata.org/prop/statement/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">pq</span><span class="p">:</span> <span class="nl">&lt;http://www.wikidata.org/prop/qualifier/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">dc</span><span class="p">:</span> <span class="nl">&lt;http://purl.org/dc/elements/1.1/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">rdfs</span><span class="p">:</span> <span class="nl">&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span>

<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="nv">?country_code</span> <span class="nv">?country_name</span> <span class="nv">?year</span> <span class="p">(</span><span class="nf">AVG</span><span class="p">(</span><span class="nv">?year_exp_WB</span><span class="p">)</span> <span class="k">AS</span> <span class="nv">?exp_wb</span><span class="p">)</span> <span class="p">(</span><span class="nf">AVG</span><span class="p">(</span><span class="nv">?year_exp</span><span class="p">)</span> <span class="k">AS</span> <span class="nv">?exp_wiki</span><span class="p">)</span>
<span class="k">WHERE</span> <span class="p">{</span>
    <span class="nv">?country</span> <span class="k">a</span> <span class="nn">wb</span><span class="p">:</span><span class="nt">Country</span> <span class="p">.</span>
    <span class="nv">?country</span> <span class="nn">dc</span><span class="p">:</span><span class="nt">identifier</span> <span class="nv">?country_code</span> <span class="p">.</span>
    <span class="nv">?country</span> <span class="nn">rdfs</span><span class="p">:</span><span class="nt">label</span> <span class="nv">?country_name</span><span class="p">.</span>
    <span class="nv">?country</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">sameAs</span> <span class="nv">?sameAsCountry</span> <span class="p">.</span>
    <span class="nv">?country</span> <span class="nn">wb</span><span class="p">:</span><span class="nt">hasAnnualIndicatorEntry</span> <span class="nv">?annualIndicator</span> <span class="p">.</span>
    <span class="nv">?annualIndicator</span> <span class="nn">wb</span><span class="p">:</span><span class="nt">hasIndicator</span> <span class="nl">&lt;http://worldbank.org/Indicator/SP.DYN.LE00.IN&gt;</span> <span class="p">.</span>
    <span class="nv">?annualIndicator</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">hasValue</span> <span class="nv">?year_exp_WB</span> <span class="p">.</span>
    <span class="nv">?annualIndicator</span> <span class="nn">time</span><span class="p">:</span><span class="nt">year</span> <span class="nv">?year</span> <span class="p">.</span>

    <span class="nv">?sameAsCountry</span> <span class="nn">p</span><span class="p">:</span><span class="nt">P2250</span> <span class="nv">?itemLifeExpectancy</span> <span class="p">.</span>
    <span class="nv">?itemLifeExpectancy</span> <span class="nn">ps</span><span class="p">:</span><span class="nt">P2250</span> <span class="nv">?year_exp</span> <span class="p">.</span>
    <span class="nv">?itemLifeExpectancy</span> <span class="nn">pq</span><span class="p">:</span><span class="nt">P585</span> <span class="nv">?time</span> <span class="p">.</span>
    <span class="k">BIND</span><span class="p">(</span><span class="nf">year</span><span class="p">(</span><span class="nv">?time</span><span class="p">)</span> <span class="k">AS</span> <span class="nv">?year</span><span class="p">)</span>
    <span class="k">FILTER</span><span class="p">(</span><span class="nv">?year</span><span class="o">=</span><span class="mi">2017</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">GROUP BY</span> <span class="nv">?country_code</span> <span class="nv">?country_name</span> <span class="nv">?year</span>
<span class="k">ORDER BY</span> <span class="nv">?country_code</span>
</pre></div>
</div>
<p>This query collects data from the World Bank KG and Wikidata. See below how to execute the query with DeTrusty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">DeTrusty</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config</span><span class="p">,</span> <span class="n">run_query</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/CoyPu/rdfmts.ttl&#39;</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/CoyPu/Q1.rq&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">join_stars_locally</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="q2-gdp-and-co2-emission-per-capita-in-germany">
<h4>Q2. GDP and CO2 Emission per Capita in Germany<a class="headerlink" href="#q2-gdp-and-co2-emission-per-capita-in-germany" title="Link to this heading"></a></h4>
<p><em>“Retrieve the GDP per capita and carbon emission per capita for Germany per year.”</em></p>
<div class="highlight-sparql notranslate"><div class="highlight"><pre><span></span><span class="k">PREFIX</span> <span class="nn">wb</span><span class="p">:</span> <span class="nl">&lt;http://worldbank.org/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">dc</span><span class="p">:</span> <span class="nl">&lt;http://purl.org/dc/elements/1.1/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">time</span><span class="p">:</span> <span class="nl">&lt;http://www.w3.org/2006/time#&gt;</span>
<span class="k">PREFIX</span> <span class="nn">wdt</span><span class="p">:</span> <span class="nl">&lt;http://www.wikidata.org/prop/direct/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">p</span><span class="p">:</span> <span class="nl">&lt;http://www.wikidata.org/prop/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">ps</span><span class="p">:</span> <span class="nl">&lt;http://www.wikidata.org/prop/statement/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">pq</span><span class="p">:</span> <span class="nl">&lt;http://www.wikidata.org/prop/qualifier/&gt;</span>
<span class="k">PREFIX</span> <span class="nn">owl</span><span class="p">:</span> <span class="nl">&lt;http://www.w3.org/2002/07/owl#&gt;</span>

<span class="k">SELECT</span> <span class="nv">?year</span> <span class="p">(</span><span class="nf">AVG</span><span class="p">(</span><span class="nv">?value</span><span class="o">/</span><span class="nv">?population</span><span class="p">)</span> <span class="k">AS</span> <span class="nv">?gdp_per_capita</span><span class="p">)</span> <span class="p">(</span><span class="nf">AVG</span><span class="p">(</span><span class="nv">?value1</span><span class="o">/</span><span class="nv">?population</span><span class="p">)</span><span class="o">*</span><span class="mi">1000000</span> <span class="k">AS</span> <span class="nv">?carbon_per_capita</span><span class="p">)</span>
<span class="k">WHERE</span> <span class="p">{</span>
    <span class="nv">?indicator</span> <span class="k">a</span> <span class="nn">wb</span><span class="p">:</span><span class="nt">AnnualIndicatorEntry</span> <span class="p">.</span>
    <span class="nv">?indicator</span> <span class="nn">wb</span><span class="p">:</span><span class="nt">hasIndicator</span> <span class="nl">&lt;http://worldbank.org/Indicator/NY.GDP.MKTP.CD&gt;</span> <span class="p">.</span>
    <span class="nv">?indicator</span> <span class="nn">wb</span><span class="p">:</span><span class="nt">hasCountry</span> <span class="nv">?country</span> <span class="p">.</span>
    <span class="nv">?indicator</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">hasValue</span> <span class="nv">?value</span> <span class="p">.</span>
    <span class="nv">?indicator</span> <span class="nn">time</span><span class="p">:</span><span class="nt">year</span> <span class="nv">?year</span> <span class="p">.</span>
    <span class="nv">?country</span> <span class="nn">dc</span><span class="p">:</span><span class="nt">identifier</span> <span class="s">&#39;DEU&#39;</span> <span class="p">.</span>

    <span class="nv">?indicator1</span> <span class="k">a</span> <span class="nn">wb</span><span class="p">:</span><span class="nt">AnnualIndicatorEntry</span> <span class="p">.</span>
    <span class="nv">?indicator1</span> <span class="nn">wb</span><span class="p">:</span><span class="nt">hasIndicator</span> <span class="nl">&lt;http://worldbank.org/Indicator/EN.ATM.CO2E.KT&gt;</span> <span class="p">.</span>
    <span class="nv">?indicator1</span> <span class="nn">wb</span><span class="p">:</span><span class="nt">hasCountry</span> <span class="nv">?country1</span> <span class="p">.</span>
    <span class="nv">?indicator1</span> <span class="nn">owl</span><span class="p">:</span><span class="nt">hasValue</span> <span class="nv">?value1</span> <span class="p">.</span>
    <span class="nv">?indicator1</span> <span class="nn">time</span><span class="p">:</span><span class="nt">year</span> <span class="nv">?year</span> <span class="p">.</span>
    <span class="nv">?country</span> <span class="nn">dc</span><span class="p">:</span><span class="nt">identifier</span> <span class="s">&#39;DEU&#39;</span> <span class="p">.</span>

    <span class="nv">?countryWiki</span> <span class="nn">wdt</span><span class="p">:</span><span class="nt">P298</span> <span class="s">&#39;DEU&#39;</span> <span class="p">.</span>
    <span class="nv">?countryWiki</span> <span class="nn">p</span><span class="p">:</span><span class="nt">P1082</span> <span class="nv">?itemP</span> <span class="p">.</span>
    <span class="nv">?itemP</span> <span class="nn">pq</span><span class="p">:</span><span class="nt">P585</span> <span class="nv">?time</span><span class="p">.</span>
    <span class="nv">?itemP</span> <span class="nn">ps</span><span class="p">:</span><span class="nt">P1082</span> <span class="nv">?population</span> <span class="p">.</span>
    <span class="k">BIND</span><span class="p">(</span><span class="nf">year</span><span class="p">(</span><span class="nv">?time</span><span class="p">)</span> <span class="k">AS</span> <span class="nv">?year</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">GROUP BY</span> <span class="nv">?year</span>
<span class="k">ORDER BY</span> <span class="nv">?year</span>
</pre></div>
</div>
<p>This query collects data from the World Bank KG and Wikidata. See below how to execute the query with DeTrusty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">DeTrusty</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config</span><span class="p">,</span> <span class="n">run_query</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">get_config</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/CoyPu/rdfmts.ttl&#39;</span><span class="p">)</span>
<span class="n">query</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/SDM-TIB/DeTrusty/master/example/CoyPu/Q2.rq&#39;</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">run_query</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">join_stars_locally</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="source-descriptions">
<h2>Source Descriptions<a class="headerlink" href="#source-descriptions" title="Link to this heading"></a></h2>
<p>We refer the reader to the chapter <a class="reference internal" href="source_description.html"><span class="doc">Source Descriptions</span></a> for more information about what source descriptions are, why they are needed, and how they can be created.
A detailed explanation of how to create the source descriptions is given in <a class="reference internal" href="source_description.html#creating-source-descriptions"><span class="std std-ref">Creating Source Descriptions</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="decomposition.html" class="btn btn-neutral float-left" title="Decomposition Types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="service.html" class="btn btn-neutral float-right" title="DeTrusty as a Service" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2024, Philipp D. Rohde, Avellino and Mazen Bechara.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>